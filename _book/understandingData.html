<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 5 Understanding Data | Analyzing NCES Data Using EdSurvey: A User’s Guide</title>
<meta name="author" content="EdSurvey Team">
<meta name="description" content="Once data are successfully read in (see how EdSurvey supports reading-in data for each study in Chapter 4), users can use the commands in the following sections to understand the data. To follow...">
<meta name="generator" content="bookdown 0.29 with bs4_book()">
<meta property="og:title" content="Chapter 5 Understanding Data | Analyzing NCES Data Using EdSurvey: A User’s Guide">
<meta property="og:type" content="book">
<meta property="og:url" content="https://github.com/American-Institutes-for-Research/EdSurvey_A_Users_Guide/understandingData.html">
<meta property="og:image" content="https://github.com/American-Institutes-for-Research/EdSurvey_A_Users_Guide/images/cover.png">
<meta property="og:description" content="Once data are successfully read in (see how EdSurvey supports reading-in data for each study in Chapter 4), users can use the commands in the following sections to understand the data. To follow...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 5 Understanding Data | Analyzing NCES Data Using EdSurvey: A User’s Guide">
<meta name="twitter:description" content="Once data are successfully read in (see how EdSurvey supports reading-in data for each study in Chapter 4), users can use the commands in the following sections to understand the data. To follow...">
<meta name="twitter:image" content="https://github.com/American-Institutes-for-Research/EdSurvey_A_Users_Guide/images/cover.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Analyzing NCES Data Using EdSurvey: A User’s Guide</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Analyzing NCES Data Using EdSurvey: A User’s Guide</a></li>
<li><a class="" href="cover-page.html">Cover Page</a></li>
<li><a class="" href="preface.html">Preface</a></li>
<li><a class="" href="introduction.html"><span class="header-section-number">1</span> Introduction</a></li>
<li><a class="" href="installation.html"><span class="header-section-number">2</span> Installing R and EdSurvey and Loading the Package</a></li>
<li><a class="" href="philosophyOfAnalysis.html"><span class="header-section-number">3</span> Philosophy of Analysis</a></li>
<li><a class="" href="dataAccess.html"><span class="header-section-number">4</span> Data Access</a></li>
<li><a class="active" href="understandingData.html"><span class="header-section-number">5</span> Understanding Data</a></li>
<li><a class="" href="dataManipulation.html"><span class="header-section-number">6</span> Data Manipulation in EdSurvey and Base R</a></li>
<li><a class="" href="descriptive-statistics.html"><span class="header-section-number">7</span> Descriptive Statistics</a></li>
<li><a class="" href="models.html"><span class="header-section-number">8</span> Models</a></li>
<li><a class="" href="analysisOutsideEdSurvey.html"><span class="header-section-number">9</span> Analysis Outside EdSurvey</a></li>
<li><a class="" href="longitudinal-datasets.html"><span class="header-section-number">10</span> Longitudinal Datasets</a></li>
<li><a class="" href="methods.html"><span class="header-section-number">11</span> Statistical Methods Used in EdSurvey</a></li>
<li><a class="" href="linkingerror.html"><span class="header-section-number">12</span> NAEP Linking Error</a></li>
<li><a class="" href="the-edsurvey-suggestweights-function.html"><span class="header-section-number">13</span> The EdSurvey suggestWeights Function</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/American-Institutes-for-Research/EdSurvey_A_Users_Guide">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="understandingData" class="section level1" number="5">
<h1>
<span class="header-section-number">5</span> Understanding Data<a class="anchor" aria-label="anchor" href="#understandingData"><i class="fas fa-link"></i></a>
</h1>
<p>Once data are successfully read in (see how <code>EdSurvey</code> supports reading-in data for each study in <a href="dataAccess.html#dataAccess">Chapter 4</a>), users can use the commands in the following sections to understand the data.</p>
<p>To follow along in this chapter, load the <a href="https://nces.ed.gov/pubsearch/pubsinfo.asp?pubid=2011463">NAEP Primer dataset</a> <code>M36NT2PM</code> and assign it the name <code>sdf</code> with the following call:</p>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/EdSurvey/man/readNAEP.html">readNAEP</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"extdata/data"</span>, <span class="st">"M36NT2PM.dat"</span>, package <span class="op">=</span> <span class="st">"NAEPprimer"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div id="searching-variables" class="section level2" number="5.1">
<h2>
<span class="header-section-number">5.1</span> Searching Variables<a class="anchor" aria-label="anchor" href="#searching-variables"><i class="fas fa-link"></i></a>
</h2>
<p>The <code><a href="https://rdrr.io/r/base/colnames.html">colnames()</a></code> function will list all variable names in the data:</p>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">sdf</span><span class="op">)</span></span>
<span><span class="co">#&gt;   [1] "ROWID"   "year"    "cohort"  "scrpsu"  "dsex"   </span></span>
<span><span class="co">#&gt;   [6] "iep"     "lep"     "ell3"    "sdracem" "pared"  </span></span>
<span><span class="co">#&gt;  [11] "b003501" "b003601" "b013801" "b017001" "b017101"</span></span>
<span><span class="co">#&gt;  [16] "b018101" "b018201" "b017451" "m815401" "m815501"</span></span>
<span><span class="co">#&gt;  [21] "m815601" "m815801" "m815701" "rptsamp" "repgrp1"</span></span>
<span><span class="co">#&gt;  [26] "repgrp2" "jkunit"  "origwt"  "srwt01"  "srwt02" </span></span>
<span><span class="co">#&gt;  [31] "srwt03"  "srwt04"  "srwt05"  "srwt06"  "srwt07" </span></span>
<span><span class="co">#&gt;  [36] "srwt08"  "srwt09"  "srwt10"  "srwt11"  "srwt12" </span></span>
<span><span class="co">#&gt;  [41] "srwt13"  "srwt14"  "srwt15"  "srwt16"  "srwt17" </span></span>
<span><span class="co">#&gt;  [46] "srwt18"  "srwt19"  "srwt20"  "srwt21"  "srwt22" </span></span>
<span><span class="co">#&gt;  [51] "srwt23"  "srwt24"  "srwt25"  "srwt26"  "srwt27" </span></span>
<span><span class="co">#&gt;  [56] "srwt28"  "srwt29"  "srwt30"  "srwt31"  "srwt32" </span></span>
<span><span class="co">#&gt;  [61] "srwt33"  "srwt34"  "srwt35"  "srwt36"  "srwt37" </span></span>
<span><span class="co">#&gt;  [66] "srwt38"  "srwt39"  "srwt40"  "srwt41"  "srwt42" </span></span>
<span><span class="co">#&gt;  [71] "srwt43"  "srwt44"  "srwt45"  "srwt46"  "srwt47" </span></span>
<span><span class="co">#&gt;  [76] "srwt48"  "srwt49"  "srwt50"  "srwt51"  "srwt52" </span></span>
<span><span class="co">#&gt;  [81] "srwt53"  "srwt54"  "srwt55"  "srwt56"  "srwt57" </span></span>
<span><span class="co">#&gt;  [86] "srwt58"  "srwt59"  "srwt60"  "srwt61"  "srwt62" </span></span>
<span><span class="co">#&gt;  [91] "smsrswt" "mrps11"  "mrps12"  "mrps13"  "mrps14" </span></span>
<span><span class="co">#&gt;  [96] "mrps15"  "mrps21"  "mrps22"  "mrps23"  "mrps24" </span></span>
<span><span class="co">#&gt; [101] "mrps25"  "mrps31"  "mrps32"  "mrps33"  "mrps34" </span></span>
<span><span class="co">#&gt; [106] "mrps35"  "mrps41"  "mrps42"  "mrps43"  "mrps44" </span></span>
<span><span class="co">#&gt; [111] "mrps45"  "mrps51"  "mrps52"  "mrps53"  "mrps54" </span></span>
<span><span class="co">#&gt; [116] "mrps55"  "mrpcm1"  "mrpcm2"  "mrpcm3"  "mrpcm4" </span></span>
<span><span class="co">#&gt; [121] "mrpcm5"  "m075201" "m075401" "m075601" "m019901"</span></span>
<span><span class="co">#&gt; [126] "m066201" "m047301" "m046201" "m066401" "m020101"</span></span>
<span><span class="co">#&gt; [131] "m067401" "m086101" "m047701" "m067301" "m048001"</span></span>
<span><span class="co">#&gt; [136] "m093701" "m086001" "m051901" "m076001" "m046001"</span></span>
<span><span class="co">#&gt; [141] "m046101" "m067701" "m046701" "m046901" "m047201"</span></span>
<span><span class="co">#&gt; [146] "m046601" "m046801" "m067801" "m066601" "m067201"</span></span>
<span><span class="co">#&gt; [151] "m068003" "m068005" "m068008" "m068007" "m068006"</span></span>
<span><span class="co">#&gt; [156] "m093601" "m053001" "m047801" "m086301" "m085701"</span></span>
<span><span class="co">#&gt; [161] "m085901" "m085601" "m085501" "m085801" "m019701"</span></span>
<span><span class="co">#&gt; [166] "m020001" "m046301" "m047001" "m046501" "m066501"</span></span>
<span><span class="co">#&gt; [171] "m047101" "m066301" "m067901" "m019601" "m051501"</span></span>
<span><span class="co">#&gt; [176] "m047901" "m053101" "m143601" "m143701" "m143801"</span></span>
<span><span class="co">#&gt; [181] "m143901" "m144001" "m144101" "m144201" "m144301"</span></span>
<span><span class="co">#&gt; [186] "m144401" "m144501" "m144601" "m144701" "m144801"</span></span>
<span><span class="co">#&gt; [191] "m144901" "m145001" "m145101" "m013431" "m0757cl"</span></span>
<span><span class="co">#&gt; [196] "m013131" "m091701" "m072801" "m091501" "m091601"</span></span>
<span><span class="co">#&gt; [201] "m073501" "m052401" "m075301" "m072901" "m013631"</span></span>
<span><span class="co">#&gt; [206] "m075801" "m013731" "m013531" "m051801" "m093401"</span></span>
<span><span class="co">#&gt; [211] "m093801" "m142001" "m142101" "m142201" "m142301"</span></span>
<span><span class="co">#&gt; [216] "m142401" "m142501" "m142601" "m142701" "m142801"</span></span>
<span><span class="co">#&gt; [221] "m142901" "m143001" "m143101" "m143201" "m143301"</span></span>
<span><span class="co">#&gt; [226] "m143401" "m143501" "m105601" "m105801" "m105901"</span></span>
<span><span class="co">#&gt; [231] "m106001" "m106101" "m106201" "m106301" "m106401"</span></span>
<span><span class="co">#&gt; [236] "m106501" "m106601" "m106701" "m106801" "m106901"</span></span>
<span><span class="co">#&gt; [241] "m107001" "m107101" "m107201" "m107401" "m107501"</span></span>
<span><span class="co">#&gt; [246] "m107601" "m109801" "m110001" "m110101" "m110201"</span></span>
<span><span class="co">#&gt; [251] "m110301" "m110401" "m110501" "m110601" "m110701"</span></span>
<span><span class="co">#&gt; [256] "m110801" "m110901" "m111001" "m111201" "m111301"</span></span>
<span><span class="co">#&gt; [261] "m111401" "m111501" "m111601" "m111801" "yrsexp" </span></span>
<span><span class="co">#&gt; [266] "yrsmath" "t089401" "t088001" "t090801" "t090802"</span></span>
<span><span class="co">#&gt; [271] "t090803" "t090804" "t090805" "t090806" "t087501"</span></span>
<span><span class="co">#&gt; [276] "t088301" "t088401" "t088501" "t088602" "t088603"</span></span>
<span><span class="co">#&gt; [281] "t088801" "t088803" "t088804" "t088805" "t091502"</span></span>
<span><span class="co">#&gt; [286] "t091503" "t091504" "c052801" "c052802" "c052804"</span></span>
<span><span class="co">#&gt; [291] "c052805" "c052806" "c052807" "c052808" "c052701"</span></span>
<span><span class="co">#&gt; [296] "c046501" "c044006" "c044007" "c052901" "c053001"</span></span>
<span><span class="co">#&gt; [301] "c053101" "sscrpsu" "c052601"</span></span></code></pre></div>
<p>To conduct a more powerful search of NAEP data variables, use the <code><a href="https://rdrr.io/pkg/EdSurvey/man/searchSDF.html">searchSDF()</a></code> function, which returns variable names and labels from an <code>edsurvey.data.frame</code> based on a character string. The user can specify which data source (either “student” or “school”) to search. For example, the following call to <code><a href="https://rdrr.io/pkg/EdSurvey/man/searchSDF.html">searchSDF()</a></code> searches for the character string <code>"book"</code> in an <code>edsurvey.data.frame</code> and specifies the <code>fileFormat</code> to search the student data file:</p>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/EdSurvey/man/searchSDF.html">searchSDF</a></span><span class="op">(</span>string <span class="op">=</span> <span class="st">"book"</span>, data <span class="op">=</span> <span class="va">sdf</span>, fileFormat <span class="op">=</span> <span class="st">"student"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   variableName                                       Labels</span></span>
<span><span class="co">#&gt; 1      b013801                                Books in home</span></span>
<span><span class="co">#&gt; 2      t088804 Computer activities: Use a gradebook program</span></span>
<span><span class="co">#&gt; 3      t091503     G8Math:How often use Geometry sketchbook</span></span></code></pre></div>
<p>The levels and labels for each variable searched via <code><a href="https://rdrr.io/pkg/EdSurvey/man/searchSDF.html">searchSDF()</a></code> also can be returned by setting <code>levels = TRUE</code>:</p>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/EdSurvey/man/searchSDF.html">searchSDF</a></span><span class="op">(</span>string <span class="op">=</span> <span class="st">"book"</span>, data <span class="op">=</span> <span class="va">sdf</span>, fileFormat <span class="op">=</span> <span class="st">"student"</span>, levels <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Variable: b013801</span></span>
<span><span class="co">#&gt; Label: Books in home</span></span>
<span><span class="co">#&gt; Levels (Lowest level first):</span></span>
<span><span class="co">#&gt;      1. 0-10</span></span>
<span><span class="co">#&gt;      2. 11-25</span></span>
<span><span class="co">#&gt;      3. 26-100</span></span>
<span><span class="co">#&gt;      4. &gt;100</span></span>
<span><span class="co">#&gt;      8. Omitted</span></span>
<span><span class="co">#&gt;      0. Multiple</span></span>
<span><span class="co">#&gt; Variable: t088804</span></span>
<span><span class="co">#&gt; Label: Computer activities: Use a gradebook program</span></span>
<span><span class="co">#&gt; Levels (Lowest level first):</span></span>
<span><span class="co">#&gt;      1. Never or hardly ever</span></span>
<span><span class="co">#&gt;      2. Once or twice/month</span></span>
<span><span class="co">#&gt;      3. Once or twice a week</span></span>
<span><span class="co">#&gt;      4. Almost every day</span></span>
<span><span class="co">#&gt;      8. Omitted</span></span>
<span><span class="co">#&gt;      0. Multiple</span></span>
<span><span class="co">#&gt; Variable: t091503</span></span>
<span><span class="co">#&gt; Label: G8Math:How often use Geometry sketchbook</span></span>
<span><span class="co">#&gt; Levels (Lowest level first):</span></span>
<span><span class="co">#&gt;      1. Never or hardly ever</span></span>
<span><span class="co">#&gt;      2. Once or twice/month</span></span>
<span><span class="co">#&gt;      3. Once or twice a week</span></span>
<span><span class="co">#&gt;      4. Almost every day</span></span>
<span><span class="co">#&gt;      8. Omitted</span></span>
<span><span class="co">#&gt;      0. Multiple</span></span></code></pre></div>
<p>The <code>|</code> (OR) operator will search several strings simultaneously:</p>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/EdSurvey/man/searchSDF.html">searchSDF</a></span><span class="op">(</span>string<span class="op">=</span><span class="st">"book|home|value"</span>, data<span class="op">=</span><span class="va">sdf</span><span class="op">)</span></span>
<span><span class="co">#&gt;    variableName</span></span>
<span><span class="co">#&gt; 1       b013801</span></span>
<span><span class="co">#&gt; 2       b017001</span></span>
<span><span class="co">#&gt; 3       b017101</span></span>
<span><span class="co">#&gt; 4       b018201</span></span>
<span><span class="co">#&gt; 5       b017451</span></span>
<span><span class="co">#&gt; 6       m086101</span></span>
<span><span class="co">#&gt; 7       m020001</span></span>
<span><span class="co">#&gt; 8       m143601</span></span>
<span><span class="co">#&gt; 9       m142301</span></span>
<span><span class="co">#&gt; 10      t088804</span></span>
<span><span class="co">#&gt; 11      t088805</span></span>
<span><span class="co">#&gt; 12      t091503</span></span>
<span><span class="co">#&gt;                                               Labels</span></span>
<span><span class="co">#&gt; 1                                      Books in home</span></span>
<span><span class="co">#&gt; 2                                  Newspaper in home</span></span>
<span><span class="co">#&gt; 3                                   Computer at home</span></span>
<span><span class="co">#&gt; 4         Language other than English spoken in home</span></span>
<span><span class="co">#&gt; 5                         Talk about studies at home</span></span>
<span><span class="co">#&gt; 6                              Read value from graph</span></span>
<span><span class="co">#&gt; 7  Apply place value                            (R1)</span></span>
<span><span class="co">#&gt; 8                       Solve for x given value of n</span></span>
<span><span class="co">#&gt; 9                               Identify place value</span></span>
<span><span class="co">#&gt; 10      Computer activities: Use a gradebook program</span></span>
<span><span class="co">#&gt; 11  Computer activities: Post homework,schedule info</span></span>
<span><span class="co">#&gt; 12          G8Math:How often use Geometry sketchbook</span></span></code></pre></div>
<p>A vector of strings will search for variables that contain multiple strings, such as both “book” and “home”; each string is present in the variable label and can be used to filter the results:</p>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/EdSurvey/man/searchSDF.html">searchSDF</a></span><span class="op">(</span>string<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"book"</span>,<span class="st">"home"</span><span class="op">)</span>, data<span class="op">=</span><span class="va">sdf</span><span class="op">)</span></span>
<span><span class="co">#&gt;   variableName        Labels</span></span>
<span><span class="co">#&gt; 1      b013801 Books in home</span></span></code></pre></div>
<p>To dive into a particular variable, use <code><a href="https://rdrr.io/pkg/EdSurvey/man/levelsSDF.html">levelsSDF()</a></code>. It returns the levels, the corresponding sample size, and label of each level.</p>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/EdSurvey/man/levelsSDF.html">levelsSDF</a></span><span class="op">(</span>varnames <span class="op">=</span> <span class="st">"b017451"</span>, data <span class="op">=</span> <span class="va">sdf</span><span class="op">)</span></span>
<span><span class="co">#&gt; Levels for Variable 'b017451' (Lowest level first):</span></span>
<span><span class="co">#&gt;     1. Never or hardly ever (n = 3837)</span></span>
<span><span class="co">#&gt;     2. Once every few weeks (n = 3147)</span></span>
<span><span class="co">#&gt;     3. About once a week (n = 2853)</span></span>
<span><span class="co">#&gt;     4. 2 or 3 times a week (n = 3362)</span></span>
<span><span class="co">#&gt;     5. Every day (n = 3132)</span></span>
<span><span class="co">#&gt;     8. Omitted* (n = 575)</span></span>
<span><span class="co">#&gt;     0. Multiple* (n = 9)</span></span>
<span><span class="co">#&gt;     NOTE: * indicates an omitted level.</span></span></code></pre></div>
</div>
<div id="displaying-basic-information" class="section level2" number="5.2">
<h2>
<span class="header-section-number">5.2</span> Displaying Basic Information<a class="anchor" aria-label="anchor" href="#displaying-basic-information"><i class="fas fa-link"></i></a>
</h2>
<p>Some basic functions that work on a <code>data.frame</code>, such as <code>dim</code>, <code>nrow</code>, and <code>ncol</code>, also work on an <code>edsurvey.data.frame</code>. They help check the dimensions of <code>sdf</code>.</p>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">sdf</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 17606   303</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">sdf</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 17606</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">sdf</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 303</span></span></code></pre></div>
<p>Basic information about plausible values and weights in an <code>edsurvey.data.frame</code> can be seen in the <code>print</code> function. The variables associated with plausible values and weights can be seen from the <code>showPlausibleValues</code> and <code>showWeights</code> functions, respectively, when setting the <code>verbose</code> argument to <code>TRUE</code>:</p>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/EdSurvey/man/showPlausibleValues.html">showPlausibleValues</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sdf</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; There are 6 subject scale(s) or subscale(s) in this</span></span>
<span><span class="co">#&gt;   edsurvey.data.frame:</span></span>
<span><span class="co">#&gt; 'num_oper' subject scale or subscale with 5 plausible</span></span>
<span><span class="co">#&gt;   values.</span></span>
<span><span class="co">#&gt;   The plausible value variables are: 'mrps11',</span></span>
<span><span class="co">#&gt;   'mrps12', 'mrps13', 'mrps14', and 'mrps15'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 'measurement' subject scale or subscale with 5</span></span>
<span><span class="co">#&gt;   plausible values.</span></span>
<span><span class="co">#&gt;   The plausible value variables are: 'mrps21',</span></span>
<span><span class="co">#&gt;   'mrps22', 'mrps23', 'mrps24', and 'mrps25'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 'geometry' subject scale or subscale with 5 plausible</span></span>
<span><span class="co">#&gt;   values.</span></span>
<span><span class="co">#&gt;   The plausible value variables are: 'mrps31',</span></span>
<span><span class="co">#&gt;   'mrps32', 'mrps33', 'mrps34', and 'mrps35'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 'data_anal_prob' subject scale or subscale with 5</span></span>
<span><span class="co">#&gt;   plausible values.</span></span>
<span><span class="co">#&gt;   The plausible value variables are: 'mrps41',</span></span>
<span><span class="co">#&gt;   'mrps42', 'mrps43', 'mrps44', and 'mrps45'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 'algebra' subject scale or subscale with 5 plausible</span></span>
<span><span class="co">#&gt;   values.</span></span>
<span><span class="co">#&gt;   The plausible value variables are: 'mrps51',</span></span>
<span><span class="co">#&gt;   'mrps52', 'mrps53', 'mrps54', and 'mrps55'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 'composite' subject scale or subscale with 5</span></span>
<span><span class="co">#&gt;   plausible values (the default).</span></span>
<span><span class="co">#&gt;   The plausible value variables are: 'mrpcm1',</span></span>
<span><span class="co">#&gt;   'mrpcm2', 'mrpcm3', 'mrpcm4', and 'mrpcm5'</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/EdSurvey/man/showWeights.html">showWeights</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sdf</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; There is 1 full sample weight in this</span></span>
<span><span class="co">#&gt;   edsurvey.data.frame:</span></span>
<span><span class="co">#&gt;   'origwt' with 62 JK replicate weights (the</span></span>
<span><span class="co">#&gt;   default).</span></span>
<span><span class="co">#&gt;     Jackknife replicate weight variables associated</span></span>
<span><span class="co">#&gt;     with the full sample weight 'origwt':</span></span>
<span><span class="co">#&gt;     'srwt01', 'srwt02', 'srwt03', 'srwt04', 'srwt05',</span></span>
<span><span class="co">#&gt;     'srwt06', 'srwt07', 'srwt08', 'srwt09', 'srwt10',</span></span>
<span><span class="co">#&gt;     'srwt11', 'srwt12', 'srwt13', 'srwt14', 'srwt15',</span></span>
<span><span class="co">#&gt;     'srwt16', 'srwt17', 'srwt18', 'srwt19', 'srwt20',</span></span>
<span><span class="co">#&gt;     'srwt21', 'srwt22', 'srwt23', 'srwt24', 'srwt25',</span></span>
<span><span class="co">#&gt;     'srwt26', 'srwt27', 'srwt28', 'srwt29', 'srwt30',</span></span>
<span><span class="co">#&gt;     'srwt31', 'srwt32', 'srwt33', 'srwt34', 'srwt35',</span></span>
<span><span class="co">#&gt;     'srwt36', 'srwt37', 'srwt38', 'srwt39', 'srwt40',</span></span>
<span><span class="co">#&gt;     'srwt41', 'srwt42', 'srwt43', 'srwt44', 'srwt45',</span></span>
<span><span class="co">#&gt;     'srwt46', 'srwt47', 'srwt48', 'srwt49', 'srwt50',</span></span>
<span><span class="co">#&gt;     'srwt51', 'srwt52', 'srwt53', 'srwt54', 'srwt55',</span></span>
<span><span class="co">#&gt;     'srwt56', 'srwt57', 'srwt58', 'srwt59', 'srwt60',</span></span>
<span><span class="co">#&gt;     'srwt61', and 'srwt62'</span></span></code></pre></div>
<p>The functions <code>getStratumVar</code> and <code>getPSUVar</code> return the default stratum variable name or a PSU variable associated with a weight variable.</p>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/EdSurvey/man/edsurvey-class.html">getStratumVar</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sdf</span>, weightVar <span class="op">=</span> <span class="st">"origwt"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   stratum </span></span>
<span><span class="co">#&gt; "repgrp1"</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/EdSurvey/man/edsurvey-class.html">getPSUVar</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sdf</span>, weightVar <span class="op">=</span> <span class="st">"origwt"</span><span class="op">)</span></span>
<span><span class="co">#&gt;      psu </span></span>
<span><span class="co">#&gt; "jkunit"</span></span></code></pre></div>
</div>
<div id="keeping-or-removing-omitted-levels" class="section level2" number="5.3">
<h2>
<span class="header-section-number">5.3</span> Keeping or Removing Omitted Levels<a class="anchor" aria-label="anchor" href="#keeping-or-removing-omitted-levels"><i class="fas fa-link"></i></a>
</h2>
<p><code>EdSurvey</code> uses listwise deletion to remove special values in all analyses by default. For example, in the NAEP Primer data, the omitted levels are returned when <code>print(sdf)</code> is called: <code>Omitted Levels: 'Multiple', 'NA', 'Omitted'</code>. By default, these levels are excluded via listwise deletion in <code>EdSurvey</code> analytical functions. To use a different method, such as pairwise deletion, set <code>defaultConditions = FALSE</code> when running your analysis.</p>
</div>
<div id="exploring-data" class="section level2" number="5.4">
<h2>
<span class="header-section-number">5.4</span> Exploring Data<a class="anchor" aria-label="anchor" href="#exploring-data"><i class="fas fa-link"></i></a>
</h2>
<p>This section introduces three basic R functions (both <code>EdSurvey</code> and <code>non-EdSurvey</code>) commonly used in the data exploration step, as follows:</p>
<ol style="list-style-type: decimal">
<li><p><strong><code><a href="https://rdrr.io/pkg/EdSurvey/man/summary2.html">summary2()</a></code></strong> produces both weighted and unweighted descriptive statistics for a variable.</p></li>
<li><p><strong><code><a href="https://rdrr.io/pkg/EdSurvey/man/edsurveyTable.html">edsurveyTable()</a></code></strong> produces cross-tabulation statistics.</p></li>
<li><p><strong><code>ggplot2</code></strong> produces a variety of exploratory data analysis (EDA) plots.</p></li>
</ol>
<div id="summary2" class="section level3" number="5.4.1">
<h3>
<span class="header-section-number">5.4.1</span> <code>summary2()</code><a class="anchor" aria-label="anchor" href="#summary2"><i class="fas fa-link"></i></a>
</h3>
<p><strong><code><a href="https://rdrr.io/pkg/EdSurvey/man/summary2.html">summary2()</a></code></strong> takes the following four arguments in order:</p>
<ul>
<li>
<strong><code>data</code></strong>: An <code>EdSurvey</code> object.</li>
<li>
<strong><code>variable</code></strong>: Name of the variable you want to produce statistics on.</li>
<li>
<strong><code>weightVar</code></strong>: name of the weight variable or <code>NULL</code> if users want to produce unweighted statistics.</li>
<li>
<strong><code>omittedLevels</code></strong>: If <code>TRUE</code>, the function will remove omitted levels for the specified variable before producing descriptive statistics. If <code>FALSE</code>, the function will include omitted levels in the output statistics.</li>
</ul>
<p>The <code>summary2</code> function produces both weighted and unweighted descriptive statistics for a variable. This functionality is quite useful for gathering response information for survey variables when conducting data exploration. For NAEP data and other datasets that have a default weight variable, <code>summary2</code> produces weighted statistics by default. If the specified variable is a set of plausible values, and the <code>weightVar</code> option is non-<code>NULL</code>, <code>summary2</code> statistics account for both plausible values pooling and weighting.</p>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/EdSurvey/man/summary2.html">summary2</a></span><span class="op">(</span><span class="va">sdf</span>, <span class="st">"composite"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Estimates are weighted using the weight variable 'origwt'</span></span>
<span><span class="co">#&gt;    Variable     N Weighted N   Min.  1st Qu.   Median</span></span>
<span><span class="co">#&gt; 1 composite 16915   16932.46 126.11 251.9626 277.4784</span></span>
<span><span class="co">#&gt;       Mean  3rd Qu.    Max.      SD NA's Zero weights</span></span>
<span><span class="co">#&gt; 1 275.8892 301.1827 404.184 36.5713    0            0</span></span></code></pre></div>
<p>By specifying <code>weightVar = NULL</code>, the function prints out unweighted descriptive statistics for the selected variable or plausible values:</p>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/EdSurvey/man/summary2.html">summary2</a></span><span class="op">(</span><span class="va">sdf</span>, <span class="st">"composite"</span>, weightVar <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="co">#&gt; Estimates are not weighted.</span></span>
<span><span class="co">#&gt;   Variable     N   Min.  1st Qu. Median     Mean  3rd Qu.</span></span>
<span><span class="co">#&gt; 1   mrpcm1 16915 130.53 252.0600 277.33 275.8606 300.7200</span></span>
<span><span class="co">#&gt; 2   mrpcm2 16915 124.16 252.2100 277.33 275.6399 300.6900</span></span>
<span><span class="co">#&gt; 3   mrpcm3 16915 115.09 252.0017 277.19 275.6570 300.5600</span></span>
<span><span class="co">#&gt; 4   mrpcm4 16915 137.19 252.4717 277.44 275.7451 300.5767</span></span>
<span><span class="co">#&gt; 5   mrpcm5 16915 123.58 252.4900 277.16 275.6965 300.5000</span></span>
<span><span class="co">#&gt;     Max.       SD NA's</span></span>
<span><span class="co">#&gt; 1 410.80 35.89864    0</span></span>
<span><span class="co">#&gt; 2 408.58 36.08483    0</span></span>
<span><span class="co">#&gt; 3 398.17 36.09278    0</span></span>
<span><span class="co">#&gt; 4 407.41 35.91078    0</span></span>
<span><span class="co">#&gt; 5 395.96 36.10905    0</span></span></code></pre></div>
<p>For a categorical variable, the <code>summary2</code> function returns the weighted number of cases, the weighted percentage, and the weighted standard error (SE). For example, the variable <code>b017451</code> (frequency of students talking about studies at home) returns the following output:</p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/EdSurvey/man/summary2.html">summary2</a></span><span class="op">(</span><span class="va">sdf</span>, <span class="st">"b017451"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Estimates are weighted using the weight variable 'origwt'</span></span>
<span><span class="co">#&gt;                b017451    N Weighted N Weighted Percent</span></span>
<span><span class="co">#&gt; 1 Never or hardly ever 3837  3952.4529      23.34245648</span></span>
<span><span class="co">#&gt; 2 Once every few weeks 3147  3190.8945      18.84483329</span></span>
<span><span class="co">#&gt; 3    About once a week 2853  2937.7148      17.34960077</span></span>
<span><span class="co">#&gt; 4  2 or 3 times a week 3362  3425.8950      20.23270282</span></span>
<span><span class="co">#&gt; 5            Every day 3132  3223.8074      19.03921080</span></span>
<span><span class="co">#&gt; 6              Omitted  575   194.3312       1.14768416</span></span>
<span><span class="co">#&gt; 7             Multiple    9     7.3676       0.04351168</span></span>
<span><span class="co">#&gt;   Weighted Percent SE</span></span>
<span><span class="co">#&gt; 1           0.4318975</span></span>
<span><span class="co">#&gt; 2           0.3740648</span></span>
<span><span class="co">#&gt; 3           0.3414566</span></span>
<span><span class="co">#&gt; 4           0.3156289</span></span>
<span><span class="co">#&gt; 5           0.4442216</span></span>
<span><span class="co">#&gt; 6           0.1272462</span></span>
<span><span class="co">#&gt; 7           0.0191187</span></span></code></pre></div>
<p>By default, the <code>summary2</code> function includes omitted levels; to remove those levels, set <code>omittedLevels = TRUE</code>:</p>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/EdSurvey/man/summary2.html">summary2</a></span><span class="op">(</span><span class="va">sdf</span>, <span class="st">"b017451"</span>, omittedLevels <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Estimates are weighted using the weight variable 'origwt'</span></span>
<span><span class="co">#&gt;                b017451    N Weighted N Weighted Percent</span></span>
<span><span class="co">#&gt; 1 Never or hardly ever 3837   3952.453         23.62386</span></span>
<span><span class="co">#&gt; 2 Once every few weeks 3147   3190.894         19.07202</span></span>
<span><span class="co">#&gt; 3    About once a week 2853   2937.715         17.55876</span></span>
<span><span class="co">#&gt; 4  2 or 3 times a week 3362   3425.895         20.47662</span></span>
<span><span class="co">#&gt; 5            Every day 3132   3223.807         19.26874</span></span>
<span><span class="co">#&gt;   Weighted Percent SE</span></span>
<span><span class="co">#&gt; 1           0.4367548</span></span>
<span><span class="co">#&gt; 2           0.3749868</span></span>
<span><span class="co">#&gt; 3           0.3486008</span></span>
<span><span class="co">#&gt; 4           0.3196719</span></span>
<span><span class="co">#&gt; 5           0.4467063</span></span></code></pre></div>
</div>
<div id="edsurveytable" class="section level3" number="5.4.2">
<h3>
<span class="header-section-number">5.4.2</span> <code>edsurveyTable()</code><a class="anchor" aria-label="anchor" href="#edsurveytable"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://rdrr.io/pkg/EdSurvey/man/edsurveyTable.html">edsurveyTable()</a></code> creates a summary table of outcome and categorical variables. The three important arguments are as follows:</p>
<ul>
<li>
<strong><code>formula</code></strong>: Typically written as <code>a ~ b + c</code>, with the following meanings:
<ul>
<li>
<strong><code>a</code></strong> is a continuous variable (optional) for which the function will return the weighted mean.</li>
<li>
<strong><code>b</code></strong> and <strong><code>c</code></strong> are categorical variables for which the function will run cross-tabulations; multiple crosstab
categorical variables can be separated using <code>+</code> symbol.<br>
</li>
</ul>
</li>
<li>
<strong><code>data</code></strong>: An <code>EdSurvey</code> object.</li>
<li>
<strong><code>pctAggregationLevel</code></strong>: A numeric value (i.e., 0, 1, 2) that indicates the level of aggregation in the cross-tabulation result’s percentage column.</li>
</ul>
<p>The following call uses <code><a href="https://rdrr.io/pkg/EdSurvey/man/edsurveyTable.html">edsurveyTable()</a></code> to create a summary table of NAEP composite mathematics performance scale scores (<code>composite</code>) of 8th-grade students by two student factors:
- <code>dsex</code>: gender
- <code>b017451</code>: frequency of talk about studies at home</p>
<p><code>pctAggregationLevel</code> is by default set to <code>NULL</code> (or <code>1</code>). That is, the <code>PCT</code> column adds up to 100 within each level of the first categorical variable <code>dsex</code>.</p>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">es1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/EdSurvey/man/edsurveyTable.html">edsurveyTable</a></span><span class="op">(</span><span class="va">composite</span> <span class="op">~</span> <span class="va">dsex</span> <span class="op">+</span> <span class="va">b017451</span>, data <span class="op">=</span> <span class="va">sdf</span>, pctAggregationLevel <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:30%; overflow-x: scroll; width:100%; ">
<div class="inline-table"><table class="table" style="font-size: 16px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:table501">Table 5.1. </span>Summary Data Tables with EdSurvey
</caption>
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
dsex
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
b017451
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
N
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
WTD_N
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
PCT
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
SE(PCT)
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
MEAN
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
SE(MEAN)
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Male
</td>
<td style="text-align:left;">
Never or hardly ever
</td>
<td style="text-align:right;">
2350
</td>
<td style="text-align:right;">
2434.844
</td>
<td style="text-align:right;">
29.00978
</td>
<td style="text-align:right;">
0.6959418
</td>
<td style="text-align:right;">
270.8243
</td>
<td style="text-align:right;">
1.057078
</td>
</tr>
<tr>
<td style="text-align:left;">
Male
</td>
<td style="text-align:left;">
Once every few weeks
</td>
<td style="text-align:right;">
1603
</td>
<td style="text-align:right;">
1638.745
</td>
<td style="text-align:right;">
19.52472
</td>
<td style="text-align:right;">
0.5020657
</td>
<td style="text-align:right;">
275.0807
</td>
<td style="text-align:right;">
1.305922
</td>
</tr>
<tr>
<td style="text-align:left;">
Male
</td>
<td style="text-align:left;">
About once a week
</td>
<td style="text-align:right;">
1384
</td>
<td style="text-align:right;">
1423.312
</td>
<td style="text-align:right;">
16.95795
</td>
<td style="text-align:right;">
0.5057265
</td>
<td style="text-align:right;">
281.5612
</td>
<td style="text-align:right;">
1.409587
</td>
</tr>
<tr>
<td style="text-align:left;">
Male
</td>
<td style="text-align:left;">
2 or 3 times a week
</td>
<td style="text-align:right;">
1535
</td>
<td style="text-align:right;">
1563.393
</td>
<td style="text-align:right;">
18.62694
</td>
<td style="text-align:right;">
0.4811497
</td>
<td style="text-align:right;">
284.9066
</td>
<td style="text-align:right;">
1.546072
</td>
</tr>
<tr>
<td style="text-align:left;">
Male
</td>
<td style="text-align:left;">
Every day
</td>
<td style="text-align:right;">
1291
</td>
<td style="text-align:right;">
1332.890
</td>
<td style="text-align:right;">
15.88062
</td>
<td style="text-align:right;">
0.5872731
</td>
<td style="text-align:right;">
277.2597
</td>
<td style="text-align:right;">
1.795784
</td>
</tr>
<tr>
<td style="text-align:left;">
Female
</td>
<td style="text-align:left;">
Never or hardly ever
</td>
<td style="text-align:right;">
1487
</td>
<td style="text-align:right;">
1517.609
</td>
<td style="text-align:right;">
18.20203
</td>
<td style="text-align:right;">
0.5078805
</td>
<td style="text-align:right;">
266.7897
</td>
<td style="text-align:right;">
1.519020
</td>
</tr>
<tr>
<td style="text-align:left;">
Female
</td>
<td style="text-align:left;">
Once every few weeks
</td>
<td style="text-align:right;">
1544
</td>
<td style="text-align:right;">
1552.149
</td>
<td style="text-align:right;">
18.61630
</td>
<td style="text-align:right;">
0.4892491
</td>
<td style="text-align:right;">
271.2255
</td>
<td style="text-align:right;">
1.205528
</td>
</tr>
<tr>
<td style="text-align:left;">
Female
</td>
<td style="text-align:left;">
About once a week
</td>
<td style="text-align:right;">
1469
</td>
<td style="text-align:right;">
1514.403
</td>
<td style="text-align:right;">
18.16358
</td>
<td style="text-align:right;">
0.5782966
</td>
<td style="text-align:right;">
278.7502
</td>
<td style="text-align:right;">
1.719778
</td>
</tr>
<tr>
<td style="text-align:left;">
Female
</td>
<td style="text-align:left;">
2 or 3 times a week
</td>
<td style="text-align:right;">
1827
</td>
<td style="text-align:right;">
1862.502
</td>
<td style="text-align:right;">
22.33864
</td>
<td style="text-align:right;">
0.4844840
</td>
<td style="text-align:right;">
282.7765
</td>
<td style="text-align:right;">
1.404107
</td>
</tr>
<tr>
<td style="text-align:left;">
Female
</td>
<td style="text-align:left;">
Every day
</td>
<td style="text-align:right;">
1841
</td>
<td style="text-align:right;">
1890.918
</td>
<td style="text-align:right;">
22.67945
</td>
<td style="text-align:right;">
0.6553039
</td>
<td style="text-align:right;">
275.4628
</td>
<td style="text-align:right;">
1.219439
</td>
</tr>
</tbody>
</table></div>
</div>
<p>By specifying <code>pctAggregationLevel = 0</code>, such as in the following call, the <code>PCT</code> column adds up to 100 across the entire sample.</p>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">es2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/EdSurvey/man/edsurveyTable.html">edsurveyTable</a></span><span class="op">(</span><span class="va">composite</span> <span class="op">~</span> <span class="va">dsex</span> <span class="op">+</span> <span class="va">b017451</span>, data <span class="op">=</span> <span class="va">sdf</span>, pctAggregationLevel <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:75%; overflow-x: scroll; width:100%; ">
<div class="inline-table"><table class="table" style="font-size: 16px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:table502">Table 5.2. </span>Summary Data Tables with EdSurvey, Setting pctAggregationLevel = 0
</caption>
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
dsex
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
b017451
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
N
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
WTD_N
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
PCT
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
SE(PCT)
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
MEAN
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
SE(MEAN)
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Male
</td>
<td style="text-align:left;">
Never or hardly ever
</td>
<td style="text-align:right;">
2350
</td>
<td style="text-align:right;">
2434.844
</td>
<td style="text-align:right;">
14.553095
</td>
<td style="text-align:right;">
0.3738531
</td>
<td style="text-align:right;">
270.8243
</td>
<td style="text-align:right;">
1.057078
</td>
</tr>
<tr>
<td style="text-align:left;">
Male
</td>
<td style="text-align:left;">
Once every few weeks
</td>
<td style="text-align:right;">
1603
</td>
<td style="text-align:right;">
1638.745
</td>
<td style="text-align:right;">
9.794803
</td>
<td style="text-align:right;">
0.2651368
</td>
<td style="text-align:right;">
275.0807
</td>
<td style="text-align:right;">
1.305922
</td>
</tr>
<tr>
<td style="text-align:left;">
Male
</td>
<td style="text-align:left;">
About once a week
</td>
<td style="text-align:right;">
1384
</td>
<td style="text-align:right;">
1423.312
</td>
<td style="text-align:right;">
8.507154
</td>
<td style="text-align:right;">
0.2770233
</td>
<td style="text-align:right;">
281.5612
</td>
<td style="text-align:right;">
1.409587
</td>
</tr>
<tr>
<td style="text-align:left;">
Male
</td>
<td style="text-align:left;">
2 or 3 times a week
</td>
<td style="text-align:right;">
1535
</td>
<td style="text-align:right;">
1563.393
</td>
<td style="text-align:right;">
9.344421
</td>
<td style="text-align:right;">
0.2670298
</td>
<td style="text-align:right;">
284.9066
</td>
<td style="text-align:right;">
1.546072
</td>
</tr>
<tr>
<td style="text-align:left;">
Male
</td>
<td style="text-align:left;">
Every day
</td>
<td style="text-align:right;">
1291
</td>
<td style="text-align:right;">
1332.890
</td>
<td style="text-align:right;">
7.966700
</td>
<td style="text-align:right;">
0.3000579
</td>
<td style="text-align:right;">
277.2597
</td>
<td style="text-align:right;">
1.795784
</td>
</tr>
<tr>
<td style="text-align:left;">
Female
</td>
<td style="text-align:left;">
Never or hardly ever
</td>
<td style="text-align:right;">
1487
</td>
<td style="text-align:right;">
1517.609
</td>
<td style="text-align:right;">
9.070768
</td>
<td style="text-align:right;">
0.2984443
</td>
<td style="text-align:right;">
266.7897
</td>
<td style="text-align:right;">
1.519020
</td>
</tr>
<tr>
<td style="text-align:left;">
Female
</td>
<td style="text-align:left;">
Once every few weeks
</td>
<td style="text-align:right;">
1544
</td>
<td style="text-align:right;">
1552.149
</td>
<td style="text-align:right;">
9.277216
</td>
<td style="text-align:right;">
0.2498498
</td>
<td style="text-align:right;">
271.2255
</td>
<td style="text-align:right;">
1.205528
</td>
</tr>
<tr>
<td style="text-align:left;">
Female
</td>
<td style="text-align:left;">
About once a week
</td>
<td style="text-align:right;">
1469
</td>
<td style="text-align:right;">
1514.403
</td>
<td style="text-align:right;">
9.051606
</td>
<td style="text-align:right;">
0.2899668
</td>
<td style="text-align:right;">
278.7502
</td>
<td style="text-align:right;">
1.719778
</td>
</tr>
<tr>
<td style="text-align:left;">
Female
</td>
<td style="text-align:left;">
2 or 3 times a week
</td>
<td style="text-align:right;">
1827
</td>
<td style="text-align:right;">
1862.502
</td>
<td style="text-align:right;">
11.132198
</td>
<td style="text-align:right;">
0.2552321
</td>
<td style="text-align:right;">
282.7765
</td>
<td style="text-align:right;">
1.404107
</td>
</tr>
<tr>
<td style="text-align:left;">
Female
</td>
<td style="text-align:left;">
Every day
</td>
<td style="text-align:right;">
1841
</td>
<td style="text-align:right;">
1890.918
</td>
<td style="text-align:right;">
11.302039
</td>
<td style="text-align:right;">
0.3497982
</td>
<td style="text-align:right;">
275.4628
</td>
<td style="text-align:right;">
1.219439
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div id="ggplot2" class="section level3" number="5.4.3">
<h3>
<span class="header-section-number">5.4.3</span> <code>ggplot2</code><a class="anchor" aria-label="anchor" href="#ggplot2"><i class="fas fa-link"></i></a>
</h3>
<p><code>ggplot2</code> is an important R package used with <code>EdSurvey</code> to conduct EDA.</p>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load the ggplot2 library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<p>The basic steps for using <code>ggplot2</code> are as follows. To learn more about how to use <code>ggplot2()</code>, visit its <a href="https://ggplot2.tidyverse.org/">official website</a>.</p>
<ol style="list-style-type: decimal">
<li>Start with a <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code>.</li>
<li>Supply a dataset and aesthetic mapping with <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code>.</li>
<li>Add layers comprising one or more of the following functions. We will address examples of the <em>talicized functions</em>.</li>
</ol>
<ul>
<li>Geometries: <em><code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code></em>, <em><code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code></em>, <em><code><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot()</a></code></em>
</li>
<li>Scales: <code><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_colour_brewer()</a></code>, <code><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date()</a></code>
</li>
<li>Facets: <em><code><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid()</a></code></em>, <code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap()</a></code>
</li>
<li>Statistical transformations: <em><code><a href="https://ggplot2.tidyverse.org/reference/stat_summary.html">stat_summary()</a></code></em>, <code><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">stat_density()</a></code>
</li>
<li>Coordinate systems: <em><code><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip()</a></code></em>, <code><a href="https://ggplot2.tidyverse.org/reference/coord_map.html">coord_map()</a></code>
</li>
</ul>
<p>In this chapter, you will find a “quick and dirty” approach (i.e., no application of weights; where applicable, only one set of plausible values is used) for EDA using <code>ggplot2</code> and <code>EdSurvey</code> functions. To learn more about conducting EDA on NCES data, read <a href="https://www.air.org/sites/default/files/EdSurvey-EDA.pdf"><em>Exploratory Data Analysis on NCES Data</em></a></p>
<p>This section uses the following <code>gddat</code> object:</p>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gddat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/EdSurvey/man/getData.html">getData</a></span><span class="op">(</span><span class="va">sdf</span>, varnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'dsex'</span>, <span class="st">'sdracem'</span>, <span class="st">'b018201'</span>, <span class="st">'b017451'</span>,</span>
<span>                                   <span class="st">'composite'</span>, <span class="st">'geometry'</span>, <span class="st">'origwt'</span><span class="op">)</span>,</span>
<span>              addAttributes <span class="op">=</span> <span class="cn">TRUE</span>, omittedLevels <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code> uses the height of rectangles to represent data values. Figure 1 shows a bar chart with counts of the variable <code>b017451</code> in each category, with <code>fill = dsex</code> used to color portions of the selected <code>x</code> variable.</p>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bar1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">gddat</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">b017451</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">dsex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Figure 1"</span><span class="op">)</span></span>
<span><span class="va">bar1</span></span></code></pre></div>
<div class="inline-figure"><img src="05-understanding-data_files/figure-html/plot1-1.png" width="1056"></div>
<p><code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code> uses binning to visualize the distribution of continuous variables. Figure 2 is a basic histogram that uses the first plausible value of the composite, giving an unbiased (but unweighted) estimate of the frequencies in each bin.</p>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hist1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gddat</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mrpcm1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Figure 2"</span><span class="op">)</span> </span>
<span><span class="va">hist1</span></span></code></pre></div>
<div class="inline-figure"><img src="05-understanding-data_files/figure-html/plot2-1.png" width="1056"></div>
<p>Figure 3 extends Figure 2, faceted on the categorical variable <code>dsex</code>, so that the output will be two histograms with common axes.</p>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hist2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gddat</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mrpcm1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"black"</span>, fill <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="va">dsex</span> <span class="op">~</span> <span class="va">.</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Figure 3"</span><span class="op">)</span> </span>
<span><span class="va">hist2</span></span></code></pre></div>
<div class="inline-figure"><img src="05-understanding-data_files/figure-html/plot3-1.png" width="1056"></div>
<p><code><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot()</a></code> shows the distribution of a single variable through quartiles. Figure 4 shows the distribution of the six levels of the <code>sdracem</code> variable by the first plausible value of the composite.</p>
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">box1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gddat</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">sdracem</span>, y <span class="op">=</span> <span class="va">mrpcm1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Figure 4"</span><span class="op">)</span> </span>
<span><span class="va">box1</span></span></code></pre></div>
<div class="inline-figure"><img src="05-understanding-data_files/figure-html/plot4-1.png" width="1056"></div>
<p>Figure 5 extends Figure 4 by using <code><a href="https://ggplot2.tidyverse.org/reference/stat_summary.html">stat_summary()</a></code> to add another statistic on top: the mean of <code>mrpcm1</code> by <code>sdracem</code>, which is represented by the diamond-shaped symbol (<code>shape = 23</code>). Figure 5 also adds a coordinate flip via <code><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip()</a></code>.</p>
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">box2</span> <span class="op">&lt;-</span> <span class="va">box1</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/stat_summary.html">stat_summary</a></span><span class="op">(</span>fun.y <span class="op">=</span> <span class="va">mean</span>, geom <span class="op">=</span> <span class="st">"point"</span>, shape <span class="op">=</span> <span class="fl">23</span>, size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Figure 5"</span><span class="op">)</span> </span>
<span><span class="va">box2</span></span></code></pre></div>
<div class="inline-figure"><img src="05-understanding-data_files/figure-html/plot5-1.png" width="1056"></div>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="dataAccess.html"><span class="header-section-number">4</span> Data Access</a></div>
<div class="next"><a href="dataManipulation.html"><span class="header-section-number">6</span> Data Manipulation in EdSurvey and Base R</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#understandingData"><span class="header-section-number">5</span> Understanding Data</a></li>
<li><a class="nav-link" href="#searching-variables"><span class="header-section-number">5.1</span> Searching Variables</a></li>
<li><a class="nav-link" href="#displaying-basic-information"><span class="header-section-number">5.2</span> Displaying Basic Information</a></li>
<li><a class="nav-link" href="#keeping-or-removing-omitted-levels"><span class="header-section-number">5.3</span> Keeping or Removing Omitted Levels</a></li>
<li>
<a class="nav-link" href="#exploring-data"><span class="header-section-number">5.4</span> Exploring Data</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#summary2"><span class="header-section-number">5.4.1</span> summary2()</a></li>
<li><a class="nav-link" href="#edsurveytable"><span class="header-section-number">5.4.2</span> edsurveyTable()</a></li>
<li><a class="nav-link" href="#ggplot2"><span class="header-section-number">5.4.3</span> ggplot2</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/American-Institutes-for-Research/EdSurvey_A_Users_Guide/blob/main/05-understanding-data.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/American-Institutes-for-Research/EdSurvey_A_Users_Guide/edit/main/05-understanding-data.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Analyzing NCES Data Using EdSurvey: A User’s Guide</strong>" was written by EdSurvey Team. It was last built on 2022-10-11.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
