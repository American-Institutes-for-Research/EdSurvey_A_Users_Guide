<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 13 The EdSurvey suggestWeights Function | Analyzing NCES Data Using EdSurvey: A User’s Guide</title>
<meta name="author" content="EdSurvey Team">
<meta name="description" content="13.1 Introduction The suggestWeights function in EdSurvey allows you to specify the list of variables you intend to use in an analysis and suggests sample weights that may be appropriate for the...">
<meta name="generator" content="bookdown 0.34 with bs4_book()">
<meta property="og:title" content="Chapter 13 The EdSurvey suggestWeights Function | Analyzing NCES Data Using EdSurvey: A User’s Guide">
<meta property="og:type" content="book">
<meta property="og:url" content="https://github.com/American-Institutes-for-Research/EdSurvey_A_Users_Guide/the-edsurvey-suggestweights-function.html">
<meta property="og:image" content="https://github.com/American-Institutes-for-Research/EdSurvey_A_Users_Guide/images/cover.png">
<meta property="og:description" content="13.1 Introduction The suggestWeights function in EdSurvey allows you to specify the list of variables you intend to use in an analysis and suggests sample weights that may be appropriate for the...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 13 The EdSurvey suggestWeights Function | Analyzing NCES Data Using EdSurvey: A User’s Guide">
<meta name="twitter:description" content="13.1 Introduction The suggestWeights function in EdSurvey allows you to specify the list of variables you intend to use in an analysis and suggests sample weights that may be appropriate for the...">
<meta name="twitter:image" content="https://github.com/American-Institutes-for-Research/EdSurvey_A_Users_Guide/images/cover.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.5.0/transition.js"></script><script src="libs/bs3compat-0.5.0/tabs.js"></script><script src="libs/bs3compat-0.5.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Analyzing NCES Data Using EdSurvey: A User’s Guide</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Analyzing NCES Data Using EdSurvey: A User’s Guide</a></li>
<li><a class="" href="cover-page.html">Cover Page</a></li>
<li><a class="" href="preface.html">Preface</a></li>
<li><a class="" href="introduction.html"><span class="header-section-number">1</span> Introduction</a></li>
<li><a class="" href="installation.html"><span class="header-section-number">2</span> Installing R and EdSurvey and Loading the Package</a></li>
<li><a class="" href="philosophyOfAnalysis.html"><span class="header-section-number">3</span> Philosophy of Analysis</a></li>
<li><a class="" href="dataAccess.html"><span class="header-section-number">4</span> Data Access</a></li>
<li><a class="" href="understandingData.html"><span class="header-section-number">5</span> Understanding Data</a></li>
<li><a class="" href="dataManipulation.html"><span class="header-section-number">6</span> Data Manipulation in EdSurvey and Base R</a></li>
<li><a class="" href="descriptive-statistics.html"><span class="header-section-number">7</span> Descriptive Statistics</a></li>
<li><a class="" href="models.html"><span class="header-section-number">8</span> Models</a></li>
<li><a class="" href="analysisOutsideEdSurvey.html"><span class="header-section-number">9</span> Analysis Outside EdSurvey</a></li>
<li><a class="" href="longitudinal-datasets.html"><span class="header-section-number">10</span> Longitudinal Datasets</a></li>
<li><a class="" href="methods.html"><span class="header-section-number">11</span> Statistical Methods Used in EdSurvey</a></li>
<li><a class="" href="linkingerror.html"><span class="header-section-number">12</span> NAEP Linking Error</a></li>
<li><a class="active" href="the-edsurvey-suggestweights-function.html"><span class="header-section-number">13</span> The EdSurvey suggestWeights Function</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/American-Institutes-for-Research/EdSurvey_A_Users_Guide">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="the-edsurvey-suggestweights-function" class="section level1" number="13">
<h1>
<span class="header-section-number">13</span> The EdSurvey <code>suggestWeights</code> Function<a class="anchor" aria-label="anchor" href="#the-edsurvey-suggestweights-function"><i class="fas fa-link"></i></a>
</h1>
<div id="introduction-3" class="section level2" number="13.1">
<h2>
<span class="header-section-number">13.1</span> Introduction<a class="anchor" aria-label="anchor" href="#introduction-3"><i class="fas fa-link"></i></a>
</h2>
<p>The <code>suggestWeights</code> function in <code>EdSurvey</code> allows you to specify the list of variables you intend to use in an analysis and suggests sample weights that may be appropriate for the analysis. Final weight variable selection, however, is up to the user and should be based on a detailed understanding of the available analytic weights. Currently, the <code>suggestWeights</code> function has been implemented for the Early Childhood Longitudinal Study, Kindergarten Class of 2010–11 (ECLS-K:2011), sponsored by the National Center for Education Statistics (NCES) within the Institute of Education Sciences of the U.S. Department of Education.</p>
<p>Sampling weights designed for use with data from a complex sample survey, such as the NCES longitudinal studies, serve two primary purposes. When used in analyses, the main sampling weight weights the sample size up to the population total of interest. For NCES sample surveys, weighting produces national-level estimates. Also, the main sampling weight adjusts for differential nonresponse patterns that can lead to bias in the estimates. The ECLS-K: 2011 Data File <em>User’s Manuals</em> <span class="citation">(<a href="references.html#ref-Tourangeau15a" role="doc-biblioref">Tourangeau, 2015a</a>, <a href="references.html#ref-Tourangeau15b" role="doc-biblioref">2015b</a>, <a href="references.html#ref-Tourangeau17" role="doc-biblioref">2017</a>, <a href="references.html#ref-Tourangeau18a" role="doc-biblioref">2018a</a>, <a href="references.html#ref-Tourangeau18b" role="doc-biblioref">2018b</a>, <a href="references.html#ref-Tourangeau19" role="doc-biblioref">2019</a>)</span> indicate that if people with certain characteristics are systematically less likely than others to respond to a survey, the collected data may not accurately reflect the characteristics and experiences of the nonrespondents, which can lead to bias. To adjust for this, respondents are assigned weights that, when applied, result in respondents representing their own characteristics and experiences as well as those of nonrespondents with similar attributes <span class="citation">(<a href="references.html#ref-Tourangeau15a" role="doc-biblioref">Tourangeau, 2015a</a>, <a href="references.html#ref-Tourangeau15b" role="doc-biblioref">2015b</a>, <a href="references.html#ref-Tourangeau17" role="doc-biblioref">2017</a>, <a href="references.html#ref-Tourangeau18a" role="doc-biblioref">2018a</a>, <a href="references.html#ref-Tourangeau18b" role="doc-biblioref">2018b</a>, <a href="references.html#ref-Tourangeau19" role="doc-biblioref">2019</a>)</span>.</p>
<p>For longitudinal studies (e.g., ECLS-K: 2011), a sample weight could be produced for use with data from every component of the study (e.g., student questionnaires, parent surveys, student assessment component, transcript component) at every round of data collection and for every combination of components and rounds. However, creating all the possible weights for a study with as many components as the NCES longitudinal studies would be impractical. Therefore, there may not be a weight that adjusts for nonresponse to the exact number of components and rounds included in an analysis.</p>
<p>When no weight corresponds exactly to the combination of components included in the analysis, researchers might prefer to use a weight that adjusts for nonresponse to more components than those in the analysis. As discussed in the ECLS-K:2011 <em>User’s Manuals</em> <span class="citation">(<a href="references.html#ref-Tourangeau15a" role="doc-biblioref">Tourangeau, 2015a</a>, <a href="references.html#ref-Tourangeau15b" role="doc-biblioref">2015b</a>, <a href="references.html#ref-Tourangeau17" role="doc-biblioref">2017</a>, <a href="references.html#ref-Tourangeau18a" role="doc-biblioref">2018a</a>, <a href="references.html#ref-Tourangeau18b" role="doc-biblioref">2018b</a>, <a href="references.html#ref-Tourangeau19" role="doc-biblioref">2019</a>)</span>, general guidance for weight selection is that (a) although a weight that includes nonresponse adjustment for more components than those in the analysis results in a smaller analytic sample, it helps adjust for the potential differential nonresponse associated with the components; and (b) if a weight with nonresponse adjustments for fewer components is used, then examine missing data for potential bias.</p>
<p>Please refer to the study-specific documentation for more comprehensive information about the analytic weights available for each study and the analysis for when each weight is best suited. For more information about ECLS-K:2011 data and data documentation, please visit the ECLS-K Data Products page.</p>
</div>
<div id="using-the-suggestweights-function-to-determine-the-weight" class="section level2" number="13.2">
<h2>
<span class="header-section-number">13.2</span> Using the <code>suggestWeights</code> Function to Determine the Weight<a class="anchor" aria-label="anchor" href="#using-the-suggestweights-function-to-determine-the-weight"><i class="fas fa-link"></i></a>
</h2>
<p>As discussed earlier, it is important to weight the data in your analyses using an appropriate sampling weight. However, with more than 100 base weights available in the ECLS-K:2011 data, you may find it difficult to choose. The <code>suggestWeights</code> function allows you to specify the variables you intend to use in an analysis, suggests a list of sample weights that may be appropriate for the analysis, and provides you with a head start to make informed decisions about weight selection.</p>
<p>To use the <code>suggestWeights</code> function, the first step is to attach the <code>EdSurvey</code> package and load the ECLS-K:2011 data. For more information, see <a href="longitudinal-datasets.html#longitudinal-datasets">10. Longitudinal Datasets</a>. The following code attaches the <code>EdSurvey</code> package and reads in the ECLS-K:2011 Kindergarten–Fifth Grade public-use data file with the parameters specified as follows:</p>
<div class="sourceCode" id="cb213"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://www.air.org/project/nces-data-r-project-edsurvey">EdSurvey</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: package 'EdSurvey' was built under R version 4.3.1</span></span>
<span><span class="va">eclsk11</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/EdSurvey/man/readECLS_K2011.html">readECLS_K2011</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"C:/EdSurveyData/ECLS_K/2011"</span>, </span>
<span>                          filename <span class="op">=</span> <span class="st">"childK5p.dat"</span>, </span>
<span>                          layoutFilename <span class="op">=</span> <span class="st">"ECLSK2011_K5PUF.sps"</span>, </span>
<span>                          verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>Next, provide the variable(s) intended to use for the analysis. The <code>suggestWeights</code> function can suggest weight(s) from the variable(s) provided. If you create new variables or rename variables, you will need to enter the source variables used for creating these variables in <code>suggestWeights</code> because the function uses information from the original variable name to determine the component and the round before it returns suggested weight(s).</p>
<p>The following example demonstrates an analysis using child assessment data from spring third grade. The weight <code>w9c790</code> would be suggested once the variables are specified. As shown in the ECLS-K:2011 <em>User’s Manual</em> <span class="citation">(<a href="references.html#ref-Tourangeau19" role="doc-biblioref">Tourangeau, 2019</a>)</span>, the weight <code>w9c790</code> is “child base weight adjusted for nonresponse associated with child assessment/child questionnaire data from spring third grade, spring fourth grade, and spring fifth grade (C7C8C9).”</p>
<div class="sourceCode" id="cb214"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/EdSurvey/man/suggestWeights.html">suggestWeights</a></span><span class="op">(</span>varnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"x7mscalk5"</span>, <span class="st">"x8mscalk5"</span>, <span class="st">"x9mscalk5"</span><span class="op">)</span>,</span>
<span>    <span class="va">eclsk11</span><span class="op">)</span></span>
<span><span class="co">#&gt; Based on your specification, below is/are the suggested weight(s). But please double</span></span>
<span><span class="co">#&gt;           check the manual to be sure to use the best weight for your analysis.</span></span>
<span><span class="co">#&gt; [1] "w9c790"</span></span></code></pre></div>
<p>The weight returned by the <code>suggestWeights</code> function can be used in <code>EdSurvey</code>’s analytic functions for further analysis. For the ECLS-K:2011 study, <code>EdSurvey</code> uses all corresponding replicate weights and estimates the variance of the coefficients with the Jackknife method. Additional information on variance estimation of ECLS-K:2011 variables is available in <a href="longitudinal-datasets.html#longitudinal-datasets">10. Longitudinal Datasets</a>.</p>
<p>To print out additional information on weight suggestion, such as the number of cases with a valid main sampling weight, weight description, variables(s) used in weight suggestions and variable(s) that the user has specified but are not used in the weight suggestion, use the <code>verbose = TRUE</code> option:</p>
<div class="sourceCode" id="cb215"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/EdSurvey/man/suggestWeights.html">suggestWeights</a></span><span class="op">(</span>varnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"x1mscalk5"</span>, <span class="st">"x2mscalk5"</span>, <span class="st">"x3mscalk5"</span>,</span>
<span>    <span class="st">"x4mscalk5"</span>, <span class="st">"x5mscalk5"</span>, <span class="st">"x6mscalk5"</span>, <span class="st">"x7mscalk5"</span>, <span class="st">"x8mscalk5"</span><span class="op">)</span>,</span>
<span>    <span class="va">eclsk11</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Based on your specification, below is/are the suggested weight(s). But please double</span></span>
<span><span class="co">#&gt;           check the manual to be sure to use the best weight for your analysis.</span></span>
<span><span class="co">#&gt; The following weight is suggested: </span></span>
<span><span class="co">#&gt; Weight: w8cf8p_80</span></span>
<span><span class="co">#&gt; Number of cases: 2,354</span></span>
<span><span class="co">#&gt; Description: Child base weight adjusted for nonresponse associated with child</span></span>
<span><span class="co">#&gt; assessment/child questionnaire data from all eight rounds from kindergarten</span></span>
<span><span class="co">#&gt; through fourth grade, as well as parent data from fall kindergarten or spring</span></span>
<span><span class="co">#&gt; kindergarten, and parent data from all rounds from fall first grade through</span></span>
<span><span class="co">#&gt; spring fourth grade. (C1C2C3C4C5C6C7C8)(P1_P2)(P3P4P5P6P7P8)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weight selection based on the inclusion of the following variables:</span></span>
<span><span class="co">#&gt;    varnames                                  source</span></span>
<span><span class="co">#&gt; 1 x1mscalk5   Fall 2010 composite/derived variables</span></span>
<span><span class="co">#&gt; 2 x2mscalk5 Spring 2011 composite/derived variables</span></span>
<span><span class="co">#&gt; 3 x3mscalk5   Fall 2011 composite/derived variables</span></span>
<span><span class="co">#&gt; 4 x4mscalk5 Spring 2012 composite/derived variables</span></span>
<span><span class="co">#&gt; 5 x5mscalk5   Fall 2012 composite/derived variables</span></span>
<span><span class="co">#&gt; 6 x6mscalk5 Spring 2013 composite/derived variables</span></span>
<span><span class="co">#&gt; 7 x7mscalk5 Spring 2014 composite/derived variables</span></span>
<span><span class="co">#&gt; 8 x8mscalk5 Spring 2015 composite/derived variables</span></span>
<span><span class="co">#&gt; [1] "w8cf8p_80"</span></span></code></pre></div>
<p>Often, there are trade-offs for using one weight versus another among the possible weights, and you may want to compare using different weights before making a final decision. To display all applicable weights that adjust for nonresponse to more components than what are included in the analysis, which typically are more conservative with smaller sample size, use the <code>showAllWeightSuggestions = TRUE</code> option:</p>
<div class="sourceCode" id="cb216"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/EdSurvey/man/suggestWeights.html">suggestWeights</a></span><span class="op">(</span>varnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"x1mscalk5"</span>, <span class="st">"x2mscalk5"</span>, <span class="st">"x3mscalk5"</span>,</span>
<span>    <span class="st">"x4mscalk5"</span>, <span class="st">"x5mscalk5"</span>, <span class="st">"x6mscalk5"</span>, <span class="st">"x7mscalk5"</span>, <span class="st">"x8mscalk5"</span><span class="op">)</span>,</span>
<span>    <span class="va">eclsk11</span>, showAllWeightSuggestions <span class="op">=</span> <span class="cn">TRUE</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Based on your specification, below is/are the suggested weight(s). But please double</span></span>
<span><span class="co">#&gt;           check the manual to be sure to use the best weight for your analysis.</span></span>
<span><span class="co">#&gt; The following weights are suggested: </span></span>
<span><span class="co">#&gt; Weight: w8cf8p_80</span></span>
<span><span class="co">#&gt; Number of cases: 2,354</span></span>
<span><span class="co">#&gt; Description: Child base weight adjusted for nonresponse associated with child</span></span>
<span><span class="co">#&gt; assessment/child questionnaire data from all eight rounds from kindergarten</span></span>
<span><span class="co">#&gt; through fourth grade, as well as parent data from fall kindergarten or spring</span></span>
<span><span class="co">#&gt; kindergarten, and parent data from all rounds from fall first grade through</span></span>
<span><span class="co">#&gt; spring fourth grade. (C1C2C3C4C5C6C7C8)(P1_P2)(P3P4P5P6P7P8)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weight: w8cf8p_2t180</span></span>
<span><span class="co">#&gt; Number of cases: 2,715</span></span>
<span><span class="co">#&gt; Description: Child base weight adjusted for nonresponse associated with child</span></span>
<span><span class="co">#&gt; assessment/child questionnaire data from all eight rounds from kindergarten</span></span>
<span><span class="co">#&gt; through fourth grade, as well as parent data from fall kindergarten or spring</span></span>
<span><span class="co">#&gt; kindergarten, and teacher data from fall and spring kindergarten, fall and</span></span>
<span><span class="co">#&gt; spring first grade, fall and spring second grade, spring third grade, and spring</span></span>
<span><span class="co">#&gt; fourth grade (C1C2C3C4C5C6C7C8)(P1_P2)(T1T2T3T4T5T6T7T8) Note: This weight was</span></span>
<span><span class="co">#&gt; created with nonresponse adjustments for the reading teacher only. There is no</span></span>
<span><span class="co">#&gt; similar weight with nonresponse adjustments for the mathematics or science</span></span>
<span><span class="co">#&gt; teacher.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weight selection based on the inclusion of the following variables:</span></span>
<span><span class="co">#&gt;    varnames                                  source</span></span>
<span><span class="co">#&gt; 1 x1mscalk5   Fall 2010 composite/derived variables</span></span>
<span><span class="co">#&gt; 2 x2mscalk5 Spring 2011 composite/derived variables</span></span>
<span><span class="co">#&gt; 3 x3mscalk5   Fall 2011 composite/derived variables</span></span>
<span><span class="co">#&gt; 4 x4mscalk5 Spring 2012 composite/derived variables</span></span>
<span><span class="co">#&gt; 5 x5mscalk5   Fall 2012 composite/derived variables</span></span>
<span><span class="co">#&gt; 6 x6mscalk5 Spring 2013 composite/derived variables</span></span>
<span><span class="co">#&gt; 7 x7mscalk5 Spring 2014 composite/derived variables</span></span>
<span><span class="co">#&gt; 8 x8mscalk5 Spring 2015 composite/derived variables</span></span>
<span><span class="co">#&gt; [1] "w8cf8p_80"    "w8cf8p_2t180"</span></span></code></pre></div>
<p>If the function returns the message “cannot determine weights for variables provided” or returns weights that are too conservative, try to remove some variable(s) from the variable list that have the least amount of nonresponse or that are of the least analytical interest. This is especially helpful in the exploratory data analysis stage.</p>
</div>
<div id="general-considerations-when-selecting-weights" class="section level2" number="13.3">
<h2>
<span class="header-section-number">13.3</span> General Considerations When Selecting Weights<a class="anchor" aria-label="anchor" href="#general-considerations-when-selecting-weights"><i class="fas fa-link"></i></a>
</h2>
<p>Within a research study, we recommend using the same main sample weight for all analyses so that the underlying sample used to produce the estimates is the same across analyses. Therefore, the analytic weight should be selected based on all variables included in all key research questions. The set of individuals with a valid weight then becomes the analytic sample for all analyses within the study. You may want to consider removing some variables if no weights or too conservative weights are returned. In addition, missing data should be examined if the weights returned adjust for nonresponse to fewer components than what’s included in the analysis.</p>
</div>
<div id="inside-suggestweights" class="section level2" number="13.4">
<h2>
<span class="header-section-number">13.4</span> Inside <code>suggestWeights</code><a class="anchor" aria-label="anchor" href="#inside-suggestweights"><i class="fas fa-link"></i></a>
</h2>
<p>The <code>suggestWeights</code> function determines the component and round of variables by the prefixes in the variable names. For example, the variable <code>p8games</code>, which corresponds to the question about how often the parent respondent or any other family members play games or do puzzles with the child in a typical week in the spring 2015 parent interview, starts with “<code>P8</code>,” which stands for the “parent” component and round “8” (spring 4th grade). If new variables are created or variables are renamed, you will need to enter the source variables used for creating these variables in <code>suggestWeights</code> because the prefixes in the original variable name contain information on the component and round for the function to work properly. The ECLS-K:2011 <em>User’s Manuals</em> provide an exhaustive list of prefixes in Exhibit 7-1 in the manuals <span class="citation">(<a href="references.html#ref-Tourangeau15a" role="doc-biblioref">Tourangeau, 2015a</a>, <a href="references.html#ref-Tourangeau15b" role="doc-biblioref">2015b</a>, <a href="references.html#ref-Tourangeau17" role="doc-biblioref">2017</a>, <a href="references.html#ref-Tourangeau18a" role="doc-biblioref">2018a</a>, <a href="references.html#ref-Tourangeau18b" role="doc-biblioref">2018b</a>, <a href="references.html#ref-Tourangeau19" role="doc-biblioref">2019</a>)</span>.</p>
<p>For most individual pairs of a specific component and a given round, one or more weights will adjust for nonresponse to those elements. For example, weights such as “<code>w8c18p_80</code>, <code>w8c28p_8a0</code>, <code>w8c28p_8b0</code>, <code>w8cf8p_80</code>…” all adjust for nonresponse to the parent component from round 8 (variables that start with “<code>P8</code>”), in varying combinations of other components. The ECLS-K:2011 <em>User’s Manuals</em> <span class="citation">(<a href="references.html#ref-Tourangeau15a" role="doc-biblioref">Tourangeau, 2015a</a>, <a href="references.html#ref-Tourangeau15b" role="doc-biblioref">2015b</a>, <a href="references.html#ref-Tourangeau17" role="doc-biblioref">2017</a>, <a href="references.html#ref-Tourangeau18a" role="doc-biblioref">2018a</a>, <a href="references.html#ref-Tourangeau18b" role="doc-biblioref">2018b</a>, <a href="references.html#ref-Tourangeau19" role="doc-biblioref">2019</a>)</span> and the appendix of this vignette summarize this adjustment.</p>
<p>For each input variable, the algorithm will generate a list of all possible weights. An intersection of these lists will provide the common set of weights that apply to all input variables that will be returned by the function. In case there is no intersection, an error message “no weight suggestions for the following variables:…” will be raised. Consider consulting the ECLS-K:2011 <em>User’s Manuals</em> <span class="citation">(<a href="references.html#ref-Tourangeau15a" role="doc-biblioref">Tourangeau, 2015a</a>, <a href="references.html#ref-Tourangeau15b" role="doc-biblioref">2015b</a>, <a href="references.html#ref-Tourangeau17" role="doc-biblioref">2017</a>, <a href="references.html#ref-Tourangeau18a" role="doc-biblioref">2018a</a>, <a href="references.html#ref-Tourangeau18b" role="doc-biblioref">2018b</a>, <a href="references.html#ref-Tourangeau19" role="doc-biblioref">2019</a>)</span> for complete descriptions of the analytic weights.</p>
<p>If there are weights that adjust for nonresponse to the exact combination of components included in a given analysis, <code>suggestWeights</code> would return these weight(s). If there are multiple weights adjusting for nonresponse to these components, the algorithm would rank possible weights using the following rule: On top of the components included in the analysis, the weight that adjusts for nonresponse to the smallest number of any additional components will be ranked the top recommendation. Why? Although all the weights in the returned list will adjust for the potential differential nonresponse associated with the components, choosing the weight that includes nonresponse adjustments for more components than you are using in your analysis would result in a smaller analytic sample. For example, <code>W8C8P_2</code> adjusts for nonresponse to three components (i.e., <code>P1</code>, <code>P2</code>, and <code>C8</code>), and <code>W8C18P_2</code> adjusts for nonresponse to five components (i.e., <code>C1</code>, <code>P1</code>, <code>C2</code>, <code>P2</code>, <code>C8</code>). If only “<code>C8</code>” variables are used in the analysis, <code>W8C8P_2</code> will be prioritized because it includes not only nonresponse adjustments for the component included in the analysis but also fewer components not included in the analysis. Multiple weights would be suggested and returned if there is a tie.</p>
<p>Lastly, the <code>suggestWeights</code> function limits the weight(s) returned so that the round for which the weight includes nonresponse adjustment will not exceed the highest round in the input variables. For example, although both weights <code>W1_2P0</code> and <code>W9C9P_20</code> can adjust for nonresponse to the parent interview for either fall kindergarten or spring kindergarten, the latter weight would be excluded from the weights suggested for an analysis that involves parent data from the kindergarten year only. Why? The weight <code>W9C9P_20</code> also adjusts for nonresponse to the child component from round 9, which would not be found in the input variables for this particular analysis.</p>
</div>
<div id="limitations" class="section level2" number="13.5">
<h2>
<span class="header-section-number">13.5</span> Limitations<a class="anchor" aria-label="anchor" href="#limitations"><i class="fas fa-link"></i></a>
</h2>
<p>First, the <code>suggestWeights</code> function does not distinguish the “or” condition from the “and” condition among components. This applies to weights with italicized <em>Yes</em> in the appendix. For example, you may see both weights <code>W12P0</code> and <code>W1_2P0</code> returned for a given analysis but it is possible that only one weight is applicable for the analysis because the former weight adjusts for nonresponse to the parent component in both the fall “and” spring kindergarten collections while the latter adjusts for nonresponse to the parent component in fall “or” spring kindergarten collection. Consider referring to the table note of Exhibit 4-2 <span class="citation">(<a href="references.html#ref-Tourangeau15a" role="doc-biblioref">Tourangeau, 2015a</a>, <a href="references.html#ref-Tourangeau15b" role="doc-biblioref">2015b</a>, <a href="references.html#ref-Tourangeau17" role="doc-biblioref">2017</a>, <a href="references.html#ref-Tourangeau18a" role="doc-biblioref">2018a</a>)</span> or Exhibit 4-3 <span class="citation">(<a href="references.html#ref-Tourangeau18b" role="doc-biblioref">Tourangeau, 2018b</a>, <a href="references.html#ref-Tourangeau19" role="doc-biblioref">2019</a>)</span> in the ECLS-K:2011 <em>User’s Manuals</em> for more information about the “or” and “and” conditions.</p>
<p>Second, the classification of round-specific composite variables (i.e., variables with prefix <code>X#</code>) is based on their variable description. For example, the component of all round-specific composite variables with “teacher report” in their description would be classified as “teacher,” and the component of all round-specific composite variables with “parent report” in their description would be classified as “parent.” The <code>suggestWeights</code> function may not yield appropriate weights if the input variables include a composite variable that is created using multiple components. For example, the race/ethnicity composite variable x_raceth_r draws from either the parent-reported data about the child’s race or the field management system (FMS), with FMS data used only if parent responses about the child’s race were missing. If this variable is included in the desired analysis, it will be excluded from the weight selection process. Please review the weights returned, if any, with more guidance from the ECLS-K:2011 <em>User’s Manuals</em> <span class="citation">(<a href="references.html#ref-Tourangeau15a" role="doc-biblioref">Tourangeau, 2015a</a>, <a href="references.html#ref-Tourangeau15b" role="doc-biblioref">2015b</a>, <a href="references.html#ref-Tourangeau17" role="doc-biblioref">2017</a>, <a href="references.html#ref-Tourangeau18a" role="doc-biblioref">2018a</a>, <a href="references.html#ref-Tourangeau18b" role="doc-biblioref">2018b</a>, <a href="references.html#ref-Tourangeau19" role="doc-biblioref">2019</a>)</span>.</p>
<p>Third, the <code>suggestWeights</code> function is intended for single-level analysis but not multilevel modeling (MLM). Consider referencing to the ECLS-K:2011 <em>User’s Manuals</em> <span class="citation">(<a href="references.html#ref-Tourangeau15a" role="doc-biblioref">Tourangeau, 2015a</a>, <a href="references.html#ref-Tourangeau15b" role="doc-biblioref">2015b</a>, <a href="references.html#ref-Tourangeau17" role="doc-biblioref">2017</a>, <a href="references.html#ref-Tourangeau18a" role="doc-biblioref">2018a</a>, <a href="references.html#ref-Tourangeau18b" role="doc-biblioref">2018b</a>, <a href="references.html#ref-Tourangeau19" role="doc-biblioref">2019</a>)</span> for more guidance on conducting MLM analyses using ECLS-K:2011 data.</p>
</div>
<div id="appendix" class="section level2" number="13.6">
<h2>
<span class="header-section-number">13.6</span> APPENDIX<a class="anchor" aria-label="anchor" href="#appendix"><i class="fas fa-link"></i></a>
</h2>
<p>The ECLS-K:2011 is a longitudinal data set weighted to compensate for unequal probabilities of selection at each sampling stage and adjust for the effects of nonresponse to various components on generated estimates, including parent interviews, teacher questionnaires, before- and after-school care provider questionnaires (if applicable), school administrator questionnaire, child questionnaires, and direct child assessment <span class="citation">(<a href="references.html#ref-Mulligan" role="doc-biblioref">Mulligan, 2018</a>)</span>.</p>
<p>The following exhibits <span class="citation">(<a href="references.html#ref-Tourangeau15a" role="doc-biblioref">Tourangeau, 2015a</a>, <a href="references.html#ref-Tourangeau15b" role="doc-biblioref">2015b</a>, <a href="references.html#ref-Tourangeau17" role="doc-biblioref">2017</a>, <a href="references.html#ref-Tourangeau18a" role="doc-biblioref">2018a</a>, <a href="references.html#ref-Tourangeau18b" role="doc-biblioref">2018b</a>, <a href="references.html#ref-Tourangeau19" role="doc-biblioref">2019</a>)</span> were developed to further assist researchers in deciding which weight to use for analyses. The components for which nonresponse adjustments are made for each weight are noted with a “Yes.” The most appropriate weight for a given analysis would have a “Yes” for every component used in the analysis and only those components.</p>
</div>
<div id="weights-developed-for-use-with-the-ecls-k2011-base-year-data-school-year-201011" class="section level2" number="13.7">
<h2>
<span class="header-section-number">13.7</span> Weights Developed for Use With the ECLS-K:2011 Base-Year Data: School Year 2010–11<a class="anchor" aria-label="anchor" href="#weights-developed-for-use-with-the-ecls-k2011-base-year-data-school-year-201011"><i class="fas fa-link"></i></a>
</h2>
<div class="inline-figure"><img src="images/eclsWeights1.png" width="100%"></div>
</div>
<div id="weights-developed-for-use-with-the-ecls-k2011-first-grade-data-school-year-201112" class="section level2" number="13.8">
<h2>
<span class="header-section-number">13.8</span> Weights Developed for Use With the ECLS-K:2011 First-Grade Data: School Year 2011–12<a class="anchor" aria-label="anchor" href="#weights-developed-for-use-with-the-ecls-k2011-first-grade-data-school-year-201112"><i class="fas fa-link"></i></a>
</h2>
<div class="inline-figure"><img src="images/eclsWeights2.png" width="100%"></div>
</div>
<div id="weights-developed-for-use-with-the-ecls-k2011-second-grade-data" class="section level2" number="13.9">
<h2>
<span class="header-section-number">13.9</span> Weights Developed for Use With the ECLS-K:2011 Second-Grade Data<a class="anchor" aria-label="anchor" href="#weights-developed-for-use-with-the-ecls-k2011-second-grade-data"><i class="fas fa-link"></i></a>
</h2>
<div class="inline-figure"><img src="images/eclsWeights3.png" width="100%"></div>
</div>
<div id="weights-developed-for-use-with-the-ecls-k2011-third-grade-data" class="section level2" number="13.10">
<h2>
<span class="header-section-number">13.10</span> Weights Developed for Use With the ECLS-K:2011 Third-Grade Data<a class="anchor" aria-label="anchor" href="#weights-developed-for-use-with-the-ecls-k2011-third-grade-data"><i class="fas fa-link"></i></a>
</h2>
<div class="inline-figure"><img src="images/eclsWeights4.png" width="100%"></div>
</div>
<div id="weights-developed-for-use-with-the-ecls-k2011-fourth-grade-data" class="section level2" number="13.11">
<h2>
<span class="header-section-number">13.11</span> Weights Developed for Use With the ECLS-K:2011 Fourth-Grade Data<a class="anchor" aria-label="anchor" href="#weights-developed-for-use-with-the-ecls-k2011-fourth-grade-data"><i class="fas fa-link"></i></a>
</h2>
<p><img src="images/eclsWeights5.png" width="100%"><img src="images/eclsWeights6.png" width="100%"></p>
</div>
<div id="weights-developed-for-use-with-the-ecls-k2011-fifth-grade-data-spring-2016" class="section level2" number="13.12">
<h2>
<span class="header-section-number">13.12</span> Weights Developed for Use With the ECLS-K:2011 Fifth-Grade Data: Spring 2016<a class="anchor" aria-label="anchor" href="#weights-developed-for-use-with-the-ecls-k2011-fifth-grade-data-spring-2016"><i class="fas fa-link"></i></a>
</h2>
<div class="inline-figure"><img src="images/eclsWeights7.png" width="100%"></div>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="linkingerror.html"><span class="header-section-number">12</span> NAEP Linking Error</a></div>
<div class="next"><a href="references.html">References</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#the-edsurvey-suggestweights-function"><span class="header-section-number">13</span> The EdSurvey suggestWeights Function</a></li>
<li><a class="nav-link" href="#introduction-3"><span class="header-section-number">13.1</span> Introduction</a></li>
<li><a class="nav-link" href="#using-the-suggestweights-function-to-determine-the-weight"><span class="header-section-number">13.2</span> Using the suggestWeights Function to Determine the Weight</a></li>
<li><a class="nav-link" href="#general-considerations-when-selecting-weights"><span class="header-section-number">13.3</span> General Considerations When Selecting Weights</a></li>
<li><a class="nav-link" href="#inside-suggestweights"><span class="header-section-number">13.4</span> Inside suggestWeights</a></li>
<li><a class="nav-link" href="#limitations"><span class="header-section-number">13.5</span> Limitations</a></li>
<li><a class="nav-link" href="#appendix"><span class="header-section-number">13.6</span> APPENDIX</a></li>
<li><a class="nav-link" href="#weights-developed-for-use-with-the-ecls-k2011-base-year-data-school-year-201011"><span class="header-section-number">13.7</span> Weights Developed for Use With the ECLS-K:2011 Base-Year Data: School Year 2010–11</a></li>
<li><a class="nav-link" href="#weights-developed-for-use-with-the-ecls-k2011-first-grade-data-school-year-201112"><span class="header-section-number">13.8</span> Weights Developed for Use With the ECLS-K:2011 First-Grade Data: School Year 2011–12</a></li>
<li><a class="nav-link" href="#weights-developed-for-use-with-the-ecls-k2011-second-grade-data"><span class="header-section-number">13.9</span> Weights Developed for Use With the ECLS-K:2011 Second-Grade Data</a></li>
<li><a class="nav-link" href="#weights-developed-for-use-with-the-ecls-k2011-third-grade-data"><span class="header-section-number">13.10</span> Weights Developed for Use With the ECLS-K:2011 Third-Grade Data</a></li>
<li><a class="nav-link" href="#weights-developed-for-use-with-the-ecls-k2011-fourth-grade-data"><span class="header-section-number">13.11</span> Weights Developed for Use With the ECLS-K:2011 Fourth-Grade Data</a></li>
<li><a class="nav-link" href="#weights-developed-for-use-with-the-ecls-k2011-fifth-grade-data-spring-2016"><span class="header-section-number">13.12</span> Weights Developed for Use With the ECLS-K:2011 Fifth-Grade Data: Spring 2016</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/American-Institutes-for-Research/EdSurvey_A_Users_Guide/blob/main/13-suggestWeights.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/American-Institutes-for-Research/EdSurvey_A_Users_Guide/edit/main/13-suggestWeights.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Analyzing NCES Data Using EdSurvey: A User’s Guide</strong>" was written by EdSurvey Team. It was last built on 2023-07-24.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
